# GeoIP Docker API Configuration
# Copy this file to .env and update with your values

# ============================================
# API Configuration
# ============================================
# Comma-separated list of allowed API keys (required)
API_KEYS=your-key-1,your-key-2,your-key-3

# ============================================
# Storage Configuration
# ============================================
# Storage mode: s3, local, or hybrid
# - s3: Use S3 pre-signed URLs (requires AWS credentials)
# - local: Serve files directly from mounted volume
# - hybrid: Try local first, fallback to S3
STORAGE_MODE=s3

# ============================================
# S3 Configuration (for s3/hybrid modes)
# ============================================
# S3 bucket containing GeoIP databases
S3_BUCKET=ytz-geoip

# AWS credentials (optional - uses IAM role if not provided)
# AWS_ACCESS_KEY_ID=your-access-key-id
# AWS_SECRET_ACCESS_KEY=your-secret-access-key

# AWS region
AWS_REGION=us-east-1

# Pre-signed URL expiry in seconds (default: 1 hour)
URL_EXPIRY_SECONDS=3600

# ============================================
# Local Storage (for local/hybrid modes)
# ============================================
# Path to local GeoIP database files on host
# This will be mounted as /data in the container
LOCAL_DATA_PATH=./data

# ============================================
# Server Configuration
# ============================================
# Server port (container internal port is always 8080)
PORT=8080

# Number of worker processes
# Set to number of CPU cores for production
WORKERS=1

# Debug mode (enables hot reload)
DEBUG=false

# ============================================
# Admin Configuration
# ============================================
# Enable admin endpoints for key management
ENABLE_ADMIN=false

# Admin API key (required if ENABLE_ADMIN=true)
# ADMIN_KEY=your-admin-key

# ============================================
# Logging
# ============================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# ============================================
# Docker Compose Specific
# ============================================
# External port for nginx (production only)
EXTERNAL_PORT=80
EXTERNAL_SSL_PORT=443